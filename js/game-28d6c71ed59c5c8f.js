(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[79203],{10134:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/game",function(){return t(89401)}])},21046:function(e,a,t){"use strict";t.d(a,{_l:function(){return s},dO:function(){return i},kJ:function(){return r}});var n=t(50456);let r=n.ZP`
  query GameData($id: String!, $technology: GameTechnologyAPS) {
    gameData(id: $id, technology: $technology) {
      dataUrl
      version
      metadata {
        updatedAt
        browser
        deviceType
        playedTime
      }
    }
  }
`,s=n.ZP`
  mutation ReplaceGameData($input: AddGameDataInput!) {
    replaceGameData(input: $input)
  }
`,i=n.ZP`
  mutation ClearGameData($input: ClearGameDataInput!) {
    clearGameData(input: $input)
  }
`},89401:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return J}});var n=t(85893),r=t(67294),s=t(46313),i=t(26830),l=t(13301),o=t(4498),u=t(33209),c=t(44715),d=t(96851),m=t(88642),g=t(25199),p=t(78524),f=t(11163),h=t.n(f),y=t(94745),v=t(32157),b=t(90611),D=t(18288),w=t(84290),x=t(60081),G=t(50319),k=t(73359),E=t(21046),Z=t(89950),_=t(74040),P=t(95129),j=t(42257);async function I(e){let a=await fetch(e,{method:"GET"}),t=await a.text();return t}let R=e=>{let{gameId:a,gameTechnology:t}=e,{user:n}=r.useContext(_.S),s=r.useContext(P.Z),i=r.useContext(j.ZP),[l]=(0,G.D)(E._l),[o]=(0,G.D)(E.dO),[u,c]=(0,k.t)(E.kJ),d=r.useRef([]);return r.useEffect(()=>{if(!c.called||c.loading)return;let e=c.data?.gameData;c.error?(d.current.forEach(e=>{e({type:"requestGameDataNone"})}),d.current=[]):e&&e.dataUrl?I(e.dataUrl).then(a=>{let t={...e,data:a};d.current.forEach(e=>{e({type:"requestGameDataResponse",data:{store:t,error:c.error}})}),d.current=[]}):(d.current.forEach(e=>{e({type:"requestGameDataResponse",data:{store:void 0,error:c.error}})}),d.current=[])},[c]),r.useEffect(()=>{let e=e=>{let r=a=>{let t=e.source;t&&t.postMessage(a,"*")};n?(d.current=[r,...d.current],u({variables:{id:a,technology:t},fetchPolicy:"network-only"})):d.current.forEach(e=>{e({type:"requestGameDataResponse",data:{store:void 0,error:null}})})},r=e=>{let{store:n,version:r,updatedAtTz:o,playedTime:u}=e.data,c=JSON.stringify(n),d=s.browser?.name||"",m=(0,j.cy)(i);l({variables:{input:{data:c,id:a,technology:t,version:r,browser:d,playedTime:u,deviceType:m,updatedAtTz:o}}})},c=e=>{let{version:n}=e.data,r=s.browser?.name||"",l=(0,j.cy)(i);o({variables:{input:{id:a,technology:t,version:n,browser:r,deviceType:l}}})},m=a=>{if(a.data&&a.data.type===Z.V)switch(a.data.event){case"requestGameData":e(a);break;case"updateGameData":case"replaceGameData":n&&r(a);break;case"clearGameData":n&&c(a);break;default:return}};return window.addEventListener("message",m),function(){window.removeEventListener("message",m)}},[l,u,o,a,t,n,s.browser,i]),null};var S=t(89041),T=t(81792),C=t(98718),$=t(63306),L=t(68771),N=t(5152),q=t.n(N),A=t(72019),F=t(69395),M=t(17134);let O=q()(()=>Promise.all([t.e(76532),t.e(9943),t.e(29269)]).then(t.bind(t,89149)),{loadableGenerated:{webpack:()=>[89149]},loading:()=>null,ssr:!0}),U=q()(()=>Promise.all([t.e(76532),t.e(9943),t.e(46996)]).then(t.bind(t,43382)),{loadableGenerated:{webpack:()=>[43382]},loading:()=>null,ssr:!0}),W=q()(()=>Promise.all([t.e(76532),t.e(9943),t.e(2739)]).then(t.bind(t,5054)),{loadableGenerated:{webpack:()=>[5054]},loading:()=>null,ssr:!0}),H=e=>{let{game:a,instant:t,related:i,alternatives:l,hotGames:o,newGames:u}=e,{routeHelper:c}=r.useContext($.Z),{isDesktop:d}=r.useContext(j.ZP),m=(0,y.mV)(),{czyExpNewGamePageDesktop3_CZY_11750:g}=r.useContext(F.T);r.useEffect(()=>((0,M.a)({gameId:a.id}),()=>(0,M.a)({gameId:null})),[a.id]),r.useEffect(()=>{(0,A.Z)().pushEvent({eventType:"offer",offerId:a.slug})},[a.slug]);let p={name:a.name,category:a.category.name},f=a.pageTitle?a.pageTitle:m._("game.head.title",{name:a.name}),h=a.metaDescription||m._("game.head.metaDescriptionFallback",p),G=c.gameCanonical(a.slug),k=s.Z.Instance.data.advertizing.domain,E=!d&&!a.iosFriendly&&!a.androidFriendly,Z=!!a.disableAds||"UNAVAILABLE"===a.status||E||(0,L.j)(),_=a.tags.map(e=>e.enSlug||e.slug);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(v.Z,{advertisingGame:{gameName:a.name,gameSlug:a.slug,categoryEnSlug:a.category.enSlug,tagsSlug:_,numLikes:a.upvotes},disabled:Z,smartRefresh:{enabled:!!a.smartRefresh,minWaitInMs:a.minWaitForSmartRefreshInMs,maxWaitInMs:a.maxWaitForSmartRefreshInMs},gamepage_exp_24:void 0!==g?"enabled"===g:void 0,children:[(0,n.jsxs)(D.Z,{title:f,metaDescription:h,canonical:G,alternatives:l,children:[(0,n.jsx)("meta",{name:"apple-mobile-web-app-title",content:a.name}),(0,n.jsx)("link",{rel:"preconnect",href:k}),(()=>{if(a.customStructuredData)return(0,n.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:a.customStructuredData}})})()]}),(0,n.jsx)(x.Z,{canonical:G,title:f,description:h,imageUrl:a.cover,type:"game"}),(0,n.jsx)(T.Z,{children:"enabled"===g?(0,n.jsx)(O,{game:a,related:i,hotGames:o,newGames:u}):(0,n.jsx)(U,{game:a,related:i})}),(0,n.jsx)(C.Z,{children:(0,n.jsx)(W,{game:a,instant:t,related:i})})]},a.slug),(0,n.jsx)(w.Z,{game:a},`gametracking-${a.slug}`),(0,n.jsx)(b.J,{game:a}),(0,n.jsx)(R,{gameId:a.id,gameTechnology:a.technology}),(0,n.jsx)(S.Z,{gameId:a.id})]})};H.getInitialProps=async e=>{let a=(e,a,t)=>{if(e.collection){let n=a.tagPageDirectLink(e.collection,{returnRelative:t});return n}{let n=a.categoryPageDirectLink(e.category.slug,{returnRelative:t});return n}},{pageService:t,routeDataService:n}=(0,p.b)(e),r=e.query&&e.query[m.l1],{deviceType:c}=(0,l.mO)(e),g=(0,l.yz)(c),f=!c.isDesktop,y=f?o.gM:o.$d,[{game:v,related:b,hotGames:D,newGames:w,instant:x},G]=await Promise.all([t.gamePage(r,y,g),n.getRouteProviderData("game")]),{res:k}=e,E=(0,u.Kd)(e);if("ARCHIVED"===v.status){let t=await n.getLocaleRouteProviderData(E),r=d.Z.createFromContext(e,t);if(k){let e=a(v,r,!1);k.writeHead(302,{Location:e.as}),k.end()}else{let e=a(v,r,!0);h().push(e.href,e.as)}}k&&v.isKids&&(k.writeHead(302,{Location:`${s.Z.Instance.data.kids}/game/${v.slug}`}),k.end());let Z=(0,i.$W)(v.slug,G);return{game:v,related:b,hotGames:D,newGames:w,instant:x,alternatives:Z}};var J=(0,c.Z)("game")((0,g.Z)(H))}},function(e){e.O(0,[7581,56774,25199,92569,49774,92888,40179],function(){return e(e.s=10134)}),_N_E=e.O()}]);